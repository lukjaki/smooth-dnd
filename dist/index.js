!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).SmoothDnD={})}(this,function(e){"use strict";var i="smooth-dnd-container-instance",v="smooth-dnd-draggable-wrapper",M="animated",c="__smooth_dnd_draggable_translation_value",a="__smooth_dnd_draggable_visibility_value",f="smooth-dnd-ghost",y="smooth-dnd-container",j="smooth-dnd-extra-size-for-insertion",_="smooth-dnd-stretcher-element",u="smooth-dnd-stretcher-instance",l="smooth-dnd-disable-touch-action",s="smooth-dnd-no-user-select",F="smooth-dnd-prevent-auto-scroll-class",V="smooth-dnd-drop-preview-default-class",X="smooth-dnd-drop-preview-inner-class",g="smooth-dnd-drop-preview-constant-class",H="smooth-dnd-drop-preview-flex-container-class",Y=Object.freeze({containerInstance:i,defaultGroupName:"@@smooth-dnd-default-group@@",wrapperClass:v,defaultGrabHandleClass:"smooth-dnd-default-grap-handle",animationClass:M,translationValue:c,visibilityValue:a,ghostClass:f,containerClass:y,extraSizeForInsertion:j,stretcherElementClass:_,stretcherElementInstance:u,isDraggableDetached:"smoth-dnd-is-draggable-detached",disbaleTouchActions:l,noUserSelectClass:s,preventAutoScrollClass:F,dropPlaceholderDefaultClass:V,dropPlaceholderInnerClass:X,dropPlaceholderWrapperClass:g,dropPlaceholderFlexContainerClass:H}),b={groupName:void 0,behaviour:"move",orientation:"vertical",getChildPayload:void 0,animationDuration:250,autoScrollEnabled:!0,shouldAcceptDrop:void 0,shouldAnimateDrop:void 0};function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t(e,t,n){(t=function(e){e=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"==typeof e?e:String(e)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function k(e){return function(e){if(Array.isArray(e))return W(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){var n;if(e)return"string"==typeof e?W(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(e,t):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function q(e){var t=(e=window.getComputedStyle(e)).overflow;return"auto"===t||"scroll"===t||(t=e["overflow-x"],e="auto"===(e=e["overflow-y"])||"scroll"===e,(t="auto"===t||"scroll"===t)&&e)?r.xy:t?r.x:e?r.y:null}function U(e,t){var n=(e=window.getComputedStyle(e)).overflow,e=e["overflow-".concat(t)];return"auto"===n||"scroll"===n||("auto"===e||"scroll"===e)}function $(e,t){for(var n=e,o=t||Z(e),n=e.parentElement;n;)ee(n,"x")&&d(n,"x")&&(o=Q(o,n.getBoundingClientRect(),"x")),ee(n,"y")&&d(n,"y")&&(o=Q(o,n.getBoundingClientRect(),"y")),n=n.parentElement;return o}function J(e,n){for(var o=e;o;){var t=function(){if(o[i]){var t=o[i];if(n.some(function(e){return e===t}))return{v:t}}o=o.parentElement}();if("object"===G(t))return t.v}return null}function K(e,t){return-1<e.className.split(" ").map(function(e){return e}).indexOf(t)}var r=function(e){return e.x="x",e.y="y",e.xy="xy",e}({}),Q=function(e,t,n){return"x"===n?{left:Math.max(e.left,t.left),top:e.top,right:Math.min(e.right,t.right),bottom:e.bottom}:{left:e.left,top:Math.max(e.top,t.top),right:e.right,bottom:Math.min(e.bottom,t.bottom)}},Z=function(e){var t=e.getBoundingClientRect(),t={left:t.left,right:t.right,top:t.top,bottom:t.bottom};return ee(e,"x")&&!d(e,"x")&&(t.right=t.right+e.scrollWidth-(t.right-t.left)),ee(e,"y")&&!d(e,"y")&&(t.bottom=t.bottom+e.scrollHeight-(t.bottom-t.top)),t},d=function(e,t){var e=window.getComputedStyle(e),n=e.overflow,e=e["overflow-".concat(t)];return"auto"===n||"scroll"===n||"hidden"===n||("auto"===e||"scroll"===e||"hidden"===e)},ee=function(e,t){return"x"===t?e.scrollWidth>e.clientWidth:e.scrollHeight>e.clientHeight},te=function(e,t){for(var n=[],o=e;o;)(U(o,"x")||U(o,"y"))&&n.push(o),o=o.parentElement;function i(){n&&(n.forEach(function(e){return e.removeEventListener("scroll",t)}),window.removeEventListener("scroll",t))}return{dispose:function(){i(),n=null},start:function(){n&&(n.forEach(function(e){return e.addEventListener("scroll",t)}),window.addEventListener("scroll",t))},stop:i}},w=function(e,t){for(var n=e;n;){if(n.matches(t))return n;n=n.parentElement}return null},x=function(e,t){var n;e&&-1===(n=e.className.split(" ").filter(function(e){return e})).indexOf(t)&&(n.unshift(t),e.className=n.join(" "))},ne=function(e,t){var n;e&&(n=e.className.split(" ").filter(function(e){return e&&e!==t}),e.className=n.join(" "))},oe=function(){window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():window.document.selection&&window.document.selection.empty()},ie=function(e){if(e){e=window.getComputedStyle(e);if(e)return e.cursor}return null};function re(e){return!(e.bottom<=e.top||e.right<=e.left)}function ae(e){var l=e.element,s=e.draggables;return function(e,t){var n,o=e.removedIndex,i=e.addedIndex,r=e.droppedElement,a=null;null!==o&&(a=l.removeChild(l.children[o]),s.splice(o,1)),null!==i&&((o=window.document.createElement("div")).className="".concat(v),o.appendChild(a&&a.firstElementChild?a.firstElementChild:r),a=o,(r=i)>=(n=l).children.length?n.appendChild(a):n.insertBefore(a,n.children[r]),i>=s.length?s.push(o):s.splice(i,0,o)),t&&t(e)}}var le=Object.freeze({domDropHandler:ae,reactDropHandler:function(){return{handler:function(){return function(e,t){t&&t(e)}}}}}),se={size:"offsetWidth",distanceToParent:"offsetLeft",translate:"transform",begin:"left",end:"right",dragPosition:"x",scrollSize:"scrollWidth",offsetSize:"offsetWidth",scrollValue:"scrollLeft",scale:"scaleX",setSize:"width",setters:{translate:function(e){return"translate3d(".concat(e,"px, 0, 0)")}}},ce={size:"offsetHeight",distanceToParent:"offsetTop",translate:"transform",begin:"top",end:"bottom",dragPosition:"y",scrollSize:"scrollHeight",offsetSize:"offsetHeight",scrollValue:"scrollTop",scale:"scaleY",setSize:"height",setters:{translate:function(e){return"translate3d(0,".concat(e,"px, 0)")}}};function ue(o){return{get:function(e,t){return e[o[t]||t]},set:function(e,t,n){e[o[t]]=o.setters[t]?o.setters[t](n):n}}}function de(n,l){n[j]=0;var o=ue("horizontal"===l?se:ce),s={translation:0};function e(){var e,t;i(n),t=(e=n).getBoundingClientRect(),s.scaleX=e.offsetWidth?(t.right-t.left)/e.offsetWidth:1,s.scaleY=e.offsetHeight?(t.bottom-t.top)/e.offsetHeight:1}function i(e){s.rect=Z(e);e=$(e,s.rect);re(e)&&(s.lastVisibleRect=s.visibleRect),s.visibleRect=e}function r(e){var t=e;return t.tagName?(t=t.getBoundingClientRect(),"vertical"===l?t.bottom-t.top:t.right-t.left):o.get(e,"size")*o.get(s,"scale")}function t(e){return o.get(e,"dragPosition")}return window.addEventListener("resize",function(){i(n)}),setTimeout(function(){e()},10),{getSize:r,getContainerRectangles:function(){return{rect:s.rect,visibleRect:s.visibleRect,lastVisibleRect:s.lastVisibleRect}},getBeginEndOfDOMRect:function(e){return{begin:o.get(e,"begin"),end:o.get(e,"end")}},getBeginEndOfContainer:function(){return{begin:o.get(s.rect,"begin")+s.translation,end:o.get(s.rect,"end")+s.translation}},getBeginEndOfContainerVisibleRect:function(){return{begin:o.get(s.visibleRect,"begin")+s.translation,end:o.get(s.visibleRect,"end")+s.translation}},getBeginEnd:function(e){t=e;var t=(o.get(t,"distanceToParent")+(t[c]||0))*o.get(s,"scale")+(o.get(s.rect,"begin")+s.translation)-o.get(n,"scrollValue");return{begin:t,end:t+r(e)*o.get(s,"scale")}},getAxisValue:t,setTranslation:function(e,t){t?o.set(e.style,"translate",t):e.style.removeProperty("transform"),e[c]=t},getTranslation:function(e){return e[c]},setVisibility:function(e,t){void 0!==e[a]&&e[a]===t||(t?e.style.removeProperty("visibility"):e.style.visibility="hidden",e[a]=t)},isVisible:function(e){return void 0===e[a]||e[a]},isInVisibleRect:function(e,t){var n=s.visibleRect,o=n.left,i=n.top,r=n.right,a=((n=n.bottom)-i<2&&(n=i+30),s.rect);return"vertical"===l?e>a.left&&e<a.right&&i<t&&t<n:o<e&&e<r&&t>a.top&&t<a.bottom},setSize:function(e,t){o.set(e,"setSize",t)},getTopLeftOfElementBegin:function(e){var t=0;return{top:"horizontal"===l?(t=e,s.rect.top):(t=s.rect.left,e),left:t}},getScrollSize:function(e){return o.get(e,"scrollSize")},getScrollValue:function(e){return o.get(e,"scrollValue")},setScrollValue:function(e,t){return o.set(e,"scrollValue",t)},invalidate:e,invalidateRects:function(){i(n)},getPosition:t,setBegin:function(e,t){o.set(e,"begin",t)}}}var fe=1500;function ge(e,t,n){var o,i,r=n.left,a=n.right,l=n.top,n=n.bottom,s=e.x,e=e.y;return s<r||a<s||e<l||n<e?null:(t="x"===t?(o=r,i=a,s):(o=l,i=n,e),i-t<(a=400<(r=i-o)?100:r/4)?{direction:"end",speedFactor:(a-(i-t))/a}:t-o<a?{direction:"begin",speedFactor:(a-(t-o))/a}:null)}function me(e,t,n){e&&(e!==window?"x"===t?e.scrollLeft+=n:e.scrollTop+=n:"x"===t?e.scrollBy(n,0):e.scrollBy(0,n))}function pe(o){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"y",r=null,a=null,l=null,s=null;return{animate:function(e,t){l=e,s=t,function n(){null===r&&(r=requestAnimationFrame(function(e){var t=e-(a=null===a?e:a),e=(a=e,t/1e3*s);me(o,i,e="begin"===l?0-e:e),r=null,n()}))}()},stop:function(){null!==r&&(cancelAnimationFrame(r),r=null),a=null}}}function he(e){for(var t=[],n=e.element;n;){var o=q(n);if(o&&!K(n,F)){var i={};switch(o){case r.xy:i.x={animator:pe(n,"x")},i.y={animator:pe(n,"y")};break;case r.x:i.x={animator:pe(n,"x")};break;case r.y:i.y={animator:pe(n,"y")}}t.push({axisAnimations:i,getRect:function(e){return function(){return $(e,e.getBoundingClientRect())}}(n),scrollerElement:n})}n=n.parentElement}return t}function ve(e){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:fe,r=e.reduce(function(e,t){t=he(t).filter(function(t){return!e.find(function(e){return e.scrollerElement===t.scrollerElement})});return[].concat(k(e),k(t))},[]);return function(e){var t,o,n=e.draggableInfo;e.reset?r.forEach(function(e){e.axisAnimations.x&&e.axisAnimations.x.animator.stop(),e.axisAnimations.y&&e.axisAnimations.y.animator.stop()}):n&&(o=n.mousePosition,r.forEach(function(e){var t=e.axisAnimations,n=(0,e.getRect)();t.x&&(t.x.scrollParams=ge(o,"x",n),e.cachedRect=n),t.y&&(t.y.scrollParams=ge(o,"y",n),e.cachedRect=n)}),r.forEach(function(e){var t,n,e=e.axisAnimations,o=e.x,e=e.y;o&&(o.scrollParams?(t=(n=o.scrollParams).direction,n=n.speedFactor,o.animator.animate(t,n*i)):o.animator.stop()),e&&(e.scrollParams?(n=(t=e.scrollParams).direction,o=t.speedFactor,e.animator.animate(n,o*i)):e.animator.stop())}),(e=r.filter(function(e){return e.cachedRect})).length)&&1<e.length&&(t=function(e,t){for(var n=document.elementFromPoint(t.x,t.y);n;){var o=e.find(function(e){return e.scrollerElement===n});if(o)return o;n=n.parentElement}return null}(e,n.mousePosition))&&e.forEach(function(e){e!==t&&(e.axisAnimations.x&&e.axisAnimations.x.animator.stop(),e.axisAnimations.y)&&e.axisAnimations.y.animator.stop()})}}var ye={overflow:"hidden",display:"block"},n={height:"100%",display:"table-cell","vertical-align":"top"},n=(t(z={},".".concat(y),{position:"relative","min-height":"30px","min-width":"30px"}),t(z,".".concat(y,".horizontal"),{display:"table"}),t(z,".".concat(y,".horizontal > .").concat(_),{display:"inline-block"}),t(z,".".concat(y,".horizontal > .").concat(v),n),t(z,".".concat(y,".vertical > .").concat(v),ye),t(z,".".concat(v),{"box-sizing":"border-box"}),t(z,".".concat(v,".horizontal"),n),t(z,".".concat(v,".vertical"),ye),t(z,".".concat(v,".animated"),{transition:"transform ease"}),t(z,".".concat(f),{"box-sizing":"border-box"}),t(z,".".concat(f,".animated"),{transition:"all ease-in-out"}),t(z,".".concat(f," *"),{"pointer-events":"none"}),t(z,".".concat(l," *"),{"touch-action":"none","-ms-touch-action":"none"}),t(z,".".concat(s),{"-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"}),t(z,".".concat(X),{flex:"1"}),t(z,".".concat(y,".horizontal > .").concat(g),{height:"100%",overflow:"hidden",display:"table-cell","vertical-align":"top"}),t(z,".".concat(y,".vertical > .").concat(g),{overflow:"hidden",display:"block",width:"100%"}),t(z,".".concat(H),{width:"100%",height:"100%",display:"flex","justify-content":"stretch","align-items":"stretch"}),t(z,".".concat(V),{"background-color":"rgba(150, 150, 150, 0.1)",border:"1px solid #ccc"}),z);function be(o){return Object.keys(o).reduce(function(e,t){var n=o[t];return"object"===G(n)?"".concat(e).concat(t,"{").concat(be(n),"}"):"".concat(e).concat(t,":").concat(n,";")},"")}function we(e){var t,n;return e&&"undefined"!=typeof window?(t=window.document.head||window.document.getElementsByTagName("head")[0],n=window.document.createElement("style"),e=be({"body *":{cursor:"".concat(e," !important")}}),n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(window.document.createTextNode(e)),t.appendChild(n),n):null}var o,xe,Ee=["mousedown","touchstart"],Ce=["mousemove","touchmove"],De=["mouseup","touchend"],m=null,p=null,h=null,E=null,C=[],D=!1,Se=!1,S=!1,Oe=!1,O=null,R=null,A=null,I=null,Re=(o=null,xe=!1,{start:function(){xe||(xe=!0,function e(){o=requestAnimationFrame(function(){m.forEach(function(e){return e.layout.invalidateRects()}),setTimeout(function(){null!==o&&e()},50)})}())},stop:function(){null!==o&&(cancelAnimationFrame(o),o=null),xe=!1}}),Ae="undefined"!=typeof window&&!!(window.navigator.userAgent.match(/Android/i)||window.navigator.userAgent.match(/webOS/i)||window.navigator.userAgent.match(/iPhone/i)||window.navigator.userAgent.match(/iPad/i)||window.navigator.userAgent.match(/iPod/i)||window.navigator.userAgent.match(/BlackBerry/i)||window.navigator.userAgent.match(/Windows Phone/i));function Ie(){"undefined"!=typeof window&&Ee.forEach(function(e){window.document.addEventListener(e,Ge,{passive:!1})})}function Pe(){return E&&E.ghostParent?E.ghostParent:p&&p.parentElement||window.document.body}function Be(e,t,n,o){var i=t.x,t=t.y,r=e.getBoundingClientRect(),a=r.left,l=r.top,s=r.right,c=r.bottom,u=(u=n.layout.getContainerRectangles().visibleRect,r=r,{left:Math.max(u.left,r.left),top:Math.max(u.top,r.top),right:Math.min(u.right,r.right),bottom:Math.min(u.bottom,r.bottom)}),r=u.left+(u.right-u.left)/2,u=u.top+(u.bottom-u.top)/2,d=e.cloneNode(!0);return d.style.zIndex="1000",d.style.boxSizing="border-box",d.style.position="fixed",d.style.top="0px",d.style.left="0px",d.style.transform=null,d.style.removeProperty("transform"),n.shouldUseTransformForGhost()?d.style.transform="translate3d(".concat(a,"px, ").concat(l,"px, 0)"):(d.style.top="".concat(l,"px"),d.style.left="".concat(a,"px")),d.style.width=s-a+"px",d.style.height=c-l+"px",d.style.overflow="visible",d.style.transition=null,d.style.removeProperty("transition"),d.style.pointerEvents="none",d.style.userSelect="none",n.getOptions().dragClass?setTimeout(function(){x(d.firstElementChild,n.getOptions().dragClass);var e=window.getComputedStyle(d.firstElementChild).cursor;I=we(e)}):I=we(o),x(d,n.getOptions().orientation||"vertical"),x(d,f),{ghost:d,centerDelta:{x:r-i,y:u-t},positionDelta:{left:a-i,top:l-t},topLeft:{x:a,y:l}}}function Te(e){function i(){ne(h.ghost,"animated"),h.ghost.style.transitionDuration=null,Pe().removeChild(h.ghost),e()}function t(e,t,n){var o=e.top,e=e.left;x(h.ghost,"animated"),n&&x(h.ghost.firstElementChild,n),h.topLeft.x=e,h.topLeft.y=o,it(t),setTimeout(function(){i()},t+20)}function n(e,t){x(h.ghost,"animated"),it(e,.9,!0),setTimeout(function(){t()},e+20)}var o,r,a,l,s;E.targetElement?(o=C.filter(function(e){return e.element===E.targetElement})[0],!(s=o.getOptions()).shouldAnimateDrop||s.shouldAnimateDrop(E.container.getOptions(),E.payload)?t(o.getDragResult().shadowBeginEnd.rect,Math.max(150,o.getOptions().animationDuration/2),o.getOptions().dropClass):i()):(s=C.filter(function(e){return e===E.container})[0])?(r=(o=s.getOptions()).behaviour,l=o.removeOnDropOut,"move"!==r&&"contain"!==r||!Se&&l||!s.getDragResult()?n(s.getOptions().animationDuration,i):!re((r=s.layout.getContainerRectangles()).visibleRect)&&re(r.lastVisibleRect)?t({top:r.lastVisibleRect.top,left:r.lastVisibleRect.left},s.getOptions().animationDuration,s.getOptions().dropClass):(r=(l=s.getDragResult()).removedIndex,l=l.elementSize,a=s.layout,s.getTranslateCalculator({dragResult:{removedIndex:r,addedIndex:r,elementSize:l,pos:void 0,shadowBeginEnd:void 0}}),l=0<r?a.getBeginEnd(s.draggables[r-1]).end:a.getBeginEndOfContainer().begin,t(a.getTopLeftOfElementBegin(l),s.getOptions().animationDuration,s.getOptions().dropClass))):n(b.animationDuration,i)}Me=1,je=5;var P,ze,Ne,Le,Me,je,_e=function(e,t,n){P=Ke(e),Ne=n,(ze="number"==typeof t?t:Ae?200:0)&&(Le=setTimeout(Ye,ze)),Ce.forEach(function(e){return window.document.addEventListener(e,Fe)},{passive:!1}),De.forEach(function(e){return window.document.addEventListener(e,Ve)},{passive:!1}),window.document.addEventListener("drag",Xe,{passive:!1})};function Fe(e){var e=Ke(e),t=e.clientX,e=e.clientY;if(ze)(Math.abs(P.clientX-t)>je||Math.abs(P.clientY-e)>je)&&He();else if(Math.abs(P.clientX-t)>Me||Math.abs(P.clientY-e)>Me)return Ye()}function Ve(){He()}function Xe(){He()}function He(){clearTimeout(Le),Ce.forEach(function(e){return window.document.removeEventListener(e,Fe)},{passive:!1}),De.forEach(function(e){return window.document.removeEventListener(e,Ve)},{passive:!1}),window.document.removeEventListener("drag",Xe,{passive:!1})}function Ye(){clearTimeout(Le),He(),Ne()}function Ge(e){var t,n,o,i,r,a=Ke(e);D||void 0!==a.button&&0!==a.button||(p=w(a.target,"."+v))&&(t=w(p,"."+y),o=(n=C.filter(function(e){return e.element===t})[0]).getOptions().dragHandleSelector,i=n.getOptions().nonDragAreaSelector,r=!0,o&&!w(a.target,o)&&(r=!1),(r=i&&w(a.target,i)?!1:r)&&(n.layout.invalidate(),x(window.document.body,l),x(window.document.body,s),window.document.addEventListener("mouseup",function e(){ne(window.document.body,l),ne(window.document.body,s),window.document.removeEventListener("mouseup",e)})),r)&&_e(a,n.getOptions().dragBeginDelay,function(){oe(),nt(a,ie(e.target)),Ce.forEach(function(e){window.document.addEventListener(e,ke,{passive:!1})}),De.forEach(function(e){window.document.addEventListener(e,Je,{passive:!1})})})}function ke(e){e.preventDefault();var t,n=Ke(e);E?("contain"===(t=E.container.getOptions()).behaviour?function(e,t){var n,o,i,r=e.clientX,e=e.clientY,t=1<arguments.length&&void 0!==t?t:"vertical",a=E.container.layout.getBeginEndOfContainerVisibleRect(),t="vertical"===t?(n=e,o="y",i="top",E.size.offsetHeight):(n=r,o="x",i="left",E.size.offsetWidth),e=a.begin,r=a.end-t,e=Math.max(e,Math.min(r,n+h.positionDelta[i]));h.topLeft[o]=e,E.position[o]=Math.max(a.begin,Math.min(a.end,n+h.centerDelta[o])),E.mousePosition[o]=Math.max(a.begin,Math.min(a.end,n)),E.position[o]<a.begin+t/2&&(E.position[o]=a.begin+2),E.position[o]>a.end-t/2&&(E.position[o]=a.end-2)}(n,t.orientation):A?"y"===A?(h.topLeft.y=n.clientY+h.positionDelta.top,E.position.y=n.clientY+h.centerDelta.y,E.mousePosition.y=n.clientY):"x"===A&&(h.topLeft.x=n.clientX+h.positionDelta.left,E.position.x=n.clientX+h.centerDelta.x,E.mousePosition.x=n.clientX):(h.topLeft.x=n.clientX+h.positionDelta.left,h.topLeft.y=n.clientY+h.positionDelta.top,E.position.x=n.clientX+h.centerDelta.x,E.position.y=n.clientY+h.centerDelta.y,E.mousePosition.x=n.clientX,E.mousePosition.y=n.clientY),it(),(Oe=!O(E))&&Ue()):nt(n,ie(e.target))}B=$e,qe=!(We=20);var B,We,qe,T,Ue=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];T&&clearTimeout(T),qe&&!T?B.call.apply(B,[null].concat(t)):T=setTimeout(function(){T=null,B.call.apply(B,[null].concat(t))},We)};function $e(){Oe&&(Oe=!1,Qe(E,m))}function Je(){var e;Ce.forEach(function(e){window.document.removeEventListener(e,ke,{passive:!1})}),De.forEach(function(e){window.document.removeEventListener(e,Je,{passive:!1})}),R({reset:!0}),I&&((e=I)&&"undefined"!=typeof window&&(window.document.head||window.document.getElementsByTagName("head")[0]).removeChild(e),I=null),E&&(Re.stop(),$e(),S=!0,Te(function(){tt(D=!1);for(var e=m||[],t=e.shift();void 0!==t;)t.handleDrop(E),t=e.shift();O=A=E=h=p=m=null,S=!1}))}function Ke(e){return e.touches?e.touches[0]:e}function Qe(t,e){var n=!1;e.forEach(function(e){e=e.handleDrag(t);n=!!e.containerBoxChanged||!1,e.containerBoxChanged=!1}),n&&(n=!1,requestAnimationFrame(function(){C.forEach(function(e){e.layout.invalidateRects(),e.onTranslated()})}))}function Ze(e){var t=e,n=null;return function(e){return!(null!==n||!D||S||(n=requestAnimationFrame(function(){D&&!S&&(Qe(e,t),R({draggableInfo:e})),n=null}),0))}}function et(e,t){return e.getOptions().autoScrollEnabled?ve(t,e.getScrollMaxSpeed()):function(e){return null}}function tt(o){C.forEach(function(e){var t,n=o?e.getOptions().onDragStart:e.getOptions().onDragEnd;n&&(t={isSource:e===E.container,payload:E.payload},e.isDragRelevant(E.container,E.payload)?t.willAcceptDrop=!0:t.willAcceptDrop=!1,n(t))})}function nt(e,t){var n,o,i,r,a,l;null!==p&&(D=!0,(n=C.filter(function(e){return p.parentElement===e.element})[0]).setDraggables(),A=n.getOptions().lockAxis?n.getOptions().lockAxis.toLowerCase():null,o=p,i=C.filter(function(e){return o.parentElement===e.element})[0],r=i.draggables.indexOf(o),a=i.getOptions().getGhostParent,l=o.getBoundingClientRect(),E={container:i,element:o,size:{offsetHeight:l.bottom-l.top,offsetWidth:l.right-l.left},elementIndex:r,payload:i.getOptions().getChildPayload?i.getOptions().getChildPayload(r):void 0,targetElement:null,position:{x:0,y:0},groupName:i.getOptions().groupName,ghostParent:a?a():null,invalidateShadow:null,mousePosition:null,relevantContainers:null},h=Be(p,{x:e.clientX,y:e.clientY},E.container,t),E.position={x:e.clientX+h.centerDelta.x,y:e.clientY+h.centerDelta.y},E.mousePosition={x:e.clientX,y:e.clientY},m=C.filter(function(e){return e.isDragRelevant(n,E.payload)}),E.relevantContainers=m,O=Ze(m),R&&R({reset:!0,draggableInfo:void 0}),R=et(n,m),m.forEach(function(e){return e.prepareDrag(e,m)}),tt(!0),O(E),Pe().appendChild(h.ghost),Re.start())}var z,ot=T=Le=null;function it(e,t,n){var e=0<arguments.length&&void 0!==e?e:0,t=1<arguments.length&&void 0!==t?t:1,o=2<arguments.length&&void 0!==n&&n,n=h,i=n.ghost,n=n.topLeft,r=n.x,a=n.y,l=!E.container||E.container.shouldUseTransformForGhost(),s=l?"translate3d(".concat(r,"px,").concat(a,"px, 0)"):null;1!==t&&(s=(s?"".concat(s," scale("):"scale(").concat(t,")")),0<e?(h.ghost.style.transitionDuration=e+"ms",requestAnimationFrame(function(){s&&(i.style.transform=s),l||(i.style.left=r+"px",i.style.top=a+"px"),ot=null,o&&(i.style.opacity="0")})):null===ot&&(ot=requestAnimationFrame(function(){s&&(i.style.transform=s),l||(i.style.left=r+"px",i.style.top=a+"px"),ot=null,o&&(i.style.opacity="0")}))}function rt(){var t;!D||Se||S||(Oe=!(Se=!0),t=Object.assign({},E,{targetElement:null,position:{x:Number.MAX_SAFE_INTEGER,y:Number.MAX_SAFE_INTEGER},mousePosition:{x:Number.MAX_SAFE_INTEGER,y:Number.MAX_SAFE_INTEGER}}),m.forEach(function(e){e.handleDrag(t)}),E.targetElement=null,E.cancelDrop=!0,Je(),Se=!1)}"undefined"!=typeof window&&"undefined"!=typeof window&&(ye=window.document.head||window.document.getElementsByTagName("head")[0],(z=window.document.createElement("style")).id="smooth-dnd-style-definitions",n=be(n),z.type="text/css",z.styleSheet?z.styleSheet.cssText=n:z.appendChild(window.document.createTextNode(n)),ye.appendChild(z));Ie();var at={register:function(e){e=e,C.push(e),D&&E&&e.isDragRelevant(E.container,E.payload)&&(m.push(e),e.prepareDrag(e,m),R&&R({reset:!0,draggableInfo:void 0}),R=et(e,m),O=Ze(m),e.handleDrag(E))},unregister:function(e){var t;e=e,C.splice(C.indexOf(e),1),D&&E&&(E.container===e&&e.fireRemoveElement(),E.targetElement===e.element&&(E.targetElement=null),-1<(t=m.indexOf(e)))&&(m.splice(t,1),R&&R({reset:!0,draggableInfo:void 0}),R=et(e,m),O=Ze(m))},isDragging:function(){return D},cancelDrag:rt};function lt(e,t,n){n=2<arguments.length&&void 0!==n?n:b.animationDuration;t?(x(e,M),e.style.transitionDuration=n+"ms"):(ne(e,M),e.style.removeProperty("transition-duration"))}function st(i){var r=[];return Array.prototype.forEach.call(i.children,function(e){var t,n,o;e.nodeType===Node.ELEMENT_NODE?(K(t=e,v)||(n=e,t=N.wrapChild?((o=window.document.createElement("div")).className="".concat(v),n.parentElement.insertBefore(o,n),o.appendChild(n),o):n),t[c]=0,r.push(t)):i.removeChild(e)}),r}function ct(e){function s(e,t,n,o){var i,r,a,l=4<arguments.length&&void 0!==arguments[4]&&arguments[4];return o<n?n:n===o?(a=(i=c.getBeginEnd(e[n])).begin,i=i.end,!l||t<(i+a)/2?n:n+1):(i=Math.floor((o+n)/2),r=(a=c.getBeginEnd(e[i])).begin,a=a.end,t<r?s(e,t,n,i-1,l):a<t?s(e,t,i+1,o,l):!l||t<(a+r)/2?i:i+1)}var c=e.layout;return function(e,t){return s(e,t,0,e.length-1,2<arguments.length&&void 0!==arguments[2]&&arguments[2])}}function ut(e){var t,n,o,i=e.element,r=e.draggables,a=e.layout,l=e.getOptions,s=(t=(e={element:i,draggables:r,layout:a,getOptions:l}).element,n=e.draggables,o=e.layout,function(){n.forEach(function(e){lt(e,!1),o.setTranslation(e,0),o.setVisibility(e,!0)}),t[u]&&(t[u].parentNode.removeChild(t[u]),t[u]=null)}),c=(N.dropHandler||ae)({element:i,draggables:r,layout:a,getOptions:l});return function(e,t){var n=t.addedIndex,t=t.removedIndex,o=2<arguments.length&&void 0!==arguments[2]&&arguments[2];s(),e.cancelDrop||(e.targetElement||l().removeOnDropOut||o)&&(o={removedIndex:t,addedIndex:null!==n?null!==t&&t<n?n-1:n:null,payload:e.payload},c(o,l().onDrop))}}function dt(e){var n=e.element,o=e.getOptions,i=null;return function(e){var e=e.draggableInfo,t=i;return{removedIndex:t=null==i&&e.container.element===n&&"copy"!==o().behaviour?i=e.elementIndex:t}}}function ft(e){var t=e.draggables,n=e.layout;return function(e){e=e.dragResult;null!==e.removedIndex&&n.setVisibility(t[e.removedIndex],!1)}}function gt(e){var n=e.element,o=e.layout;return function(e){var e=e.draggableInfo,t=document.elementFromPoint(e.position.x,e.position.y);if(t){t=J(t,e.relevantContainers);if(t&&t.element===n)return{pos:o.getPosition(e.position)}}return{pos:null}}}function mt(e){var n=e.layout,o=null;return function(e){var t=e.draggableInfo;return null===e.dragResult.pos?o=null:{elementSize:o=o||n.getSize(t.size)}}}function pt(e){var n=e.element;return function(e){var t=e.draggableInfo,e=e.dragResult;!function(e,t,n){t&&(!(2<arguments.length&&void 0!==n)||n)?e.targetElement=t:e.targetElement===t&&(e.targetElement=null)}(t,n,!!e.pos)}}function ht(){return function(e){return null!==e.dragResult.pos?{addedIndex:0}:{addedIndex:null}}}function vt(e){var n=e.layout,o=null;return function(e){var t,e=e.dragResult.addedIndex;return e!==o?(o=e,t=(e=n.getBeginEndOfContainer()).begin,e.end,{shadowBeginEnd:{rect:n.getTopLeftOfElementBegin(t)}}):null}}function yt(e){var c=e.layout,u=e.element,d=e.getOptions,f=null;return function(e){var t,n,o,i,e=e.dragResult,r=e.elementSize,a=e.shadowBeginEnd,l=e.addedIndex,e=e.dropPlaceholderContainer,s=d();return s.dropPlaceholder?(t=(s="boolean"==typeof s.dropPlaceholder?{}:s.dropPlaceholder).animationDuration,n=s.className,s=s.showOnTop,null!==l?(e||(o=document.createElement("div"),(i=document.createElement("div")).className=H,o.className="".concat(X," ").concat(n||V),(e=document.createElement("div")).className="".concat(g),e.style.position="absolute",void 0!==t&&(e.style.transition="all ".concat(t,"ms ease")),e.appendChild(i),i.appendChild(o),c.setSize(e.style,r+"px"),e.style.pointerEvents="none",s?u.appendChild(e):u.insertBefore(e,u.firstElementChild)),f!==l&&a.dropArea&&c.setBegin(e.style,a.dropArea.begin-c.getBeginEndOfContainer().begin+"px"),f=l,{dropPlaceholderContainer:e}):(e&&null!==f&&u.removeChild(e),f=null,{dropPlaceholderContainer:void 0})):null}}function bt(e){var n=Dt(e);return function(e){var t=e.draggableInfo,e=e.dragResult;return t.invalidateShadow?n({draggableInfo:t,dragResult:e}):null}}function wt(e){n=e.draggables,o=ct({layout:e.layout});var n,o,i=function(e){var e=e.dragResult,t=e.shadowBeginEnd,e=e.pos;return t?t.begin+t.beginAdjustment<=e&&t.end>=e?null:e<t.begin+t.beginAdjustment?o(n,e):e>t.end?o(n,e)+1:n.length:null!==(t=o(n,e,!0))?t:n.length};return function(e){var e=e.dragResult,t=null;return{addedIndex:t=null!==e.pos&&null===(t=i({dragResult:e}))?e.addedIndex:t}}}function xt(){var n=null;return function(e){var e=e.dragResult,t=e.addedIndex,e=e.shadowBeginEnd;t!==n&&null!==n&&e&&(e.beginAdjustment=0),n=t}}function Et(e){var o=e.element,i=e.draggables,r=e.layout,a=e.getOptions,l=null;return function(e){var e=e.dragResult,t=e.addedIndex,n=e.removedIndex,e=e.elementSize;if(null===n)if(null!==t){if(!l){n=r.getBeginEndOfContainer();n.end=n.begin+r.getSize(o);var t=r.getScrollSize(o)>r.getSize(o)?n.begin+r.getScrollSize(o)-r.getScrollValue(o):n.end,n=0<i.length?r.getBeginEnd(i[i.length-1]).end-i[i.length-1][c]:n.begin;if(t<n+e)return(l=window.document.createElement("div")).className=_+" "+a().orientation,n=0<i.length?e+n-t:e,r.setSize(l.style,"".concat(n,"px")),o.appendChild(l),o[u]=l,{containerBoxChanged:!0}}}else if(l)return r.setTranslation(l,0),t=l,l=null,o.removeChild(t),{containerBoxChanged:!(o[u]=null)}}}function Ct(e){var l=e.draggables,s=e.layout,c=null,u=null;return function(e){var e=e.dragResult,t=e.addedIndex,n=e.removedIndex,o=e.elementSize;if(t!==c||n!==u){for(var i,r,a=0;a<l.length;a++)a!==n&&(i=l[a],r=0,null!==n&&n<a&&(r-=o),null!==t&&t<=a&&(r+=o),s.setTranslation(i,r));return{addedIndex:c=t,removedIndex:u=n}}}}function Dt(e){var d=e.draggables,f=e.layout,g=null;return function(e){var t,n,o,i,r,a=e.draggableInfo,e=e.dragResult,l=e.addedIndex,s=e.removedIndex,c=e.elementSize,u=e.pos,e=e.shadowBeginEnd;return null!==u?null===l||!a.invalidateShadow&&l===g?null:(u=l-1,a=Number.MIN_SAFE_INTEGER,n=t=0,o=i=null,u===s&&u--,t=-1<u?(r=f.getSize(d[u]),o=f.getBeginEnd(d[u]),a=c<r?o.end-(r-c)/2:o.end,o.end):(o={end:f.getBeginEndOfContainer().begin},f.getBeginEndOfContainer().begin),u=Number.MAX_SAFE_INTEGER,(r=l)===s&&r++,n=r<d.length?(s=f.getSize(d[r]),i=f.getBeginEnd(d[r]),u=c<s?i.begin+(s-c)/2:i.begin,i.begin):(i={begin:f.getContainerRectangles().rect.end},f.getContainerRectangles().rect.end-f.getContainerRectangles().rect.begin),r=o&&i?f.getTopLeftOfElementBegin(o.end):null,g=l,{shadowBeginEnd:{dropArea:{begin:t,end:n},begin:a,end:u,rect:r,beginAdjustment:e?e.beginAdjustment:0}}):{shadowBeginEnd:g=null}}}function St(){var o=null;return function(e){var e=e.dragResult,t=e.pos,n=e.addedIndex,e=e.shadowBeginEnd;null!==t?null!=n&&null===o&&(t<e.begin&&(t=t-e.begin-5,e.beginAdjustment=t),o=n):o=null}}function Ot(e){var e=e.getOptions,t=!1,n=e();return function(e){e=!!e.dragResult.pos;e!==t&&((t=e)?n.onDragEnter&&n.onDragEnter():n.onDragLeave&&n.onDragLeave())}}function Rt(e){var e=e.getOptions,r=null,a=e();return function(e){var t,n=e.dragResult,o=n.addedIndex,n=n.removedIndex,e=e.draggableInfo,i=e.payload,e=e.element;a.onDropReady&&null!==o&&r!==o&&(t=r=o,null!==n&&n<o&&t--,a.onDropReady({addedIndex:t,removedIndex:n,payload:i,element:e?e.firstElementChild:void 0}))}}function At(e){return"drop-zone"===e.getOptions().behaviour?It(e)(dt,ft,gt,mt,pt,ht,vt,Ot,Rt):It(e)(dt,ft,gt,mt,pt,bt,wt,xt,Et,Ct,Dt,yt,St,Ot,Rt)}function It(r){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=t.map(function(e){return e(r)}),i=null;return function(n){return i=o.reduce(function(e,t){return Object.assign(e,t({draggableInfo:n,dragResult:e}))},i||{addedIndex:null,removedIndex:null,elementSize:null,pos:null,shadowBeginEnd:null})}}}function Pt(h){return function(e){var t,n,o,i,r,a=Object.assign({},b,e),l=null,s=null,c=(e=p,o=st(t=h),n=e(),x(t,"".concat(y," ").concat(n.orientation)),{element:t,draggables:o,getOptions:e,layout:de(t,n.orientation,n.animationDuration)}),u=At(c),d=ut(c),f=te(h,function(){c.layout.invalidateRects(),g()});function g(){null!==s&&(s.invalidateShadow=!0,l=u(s),s.invalidateShadow=!1)}function m(e,t){for(var n=st(t),o=0;o<n.length;o++)e[o]=n[o];for(var i=0;i<e.length-n.length;i++)e.pop()}function p(){return a}return{element:h,draggables:c.draggables,isDragRelevant:(i=(o=c).element,r=o.getOptions,function(e,t){var n=r();return n.shouldAcceptDrop?n.shouldAcceptDrop(e.getOptions(),t):(t=e.getOptions(),"copy"!==n.behaviour&&w(i,"."+v)!==e.element&&(e.element===i||!(!t.groupName||t.groupName!==n.groupName)))}),layout:c.layout,dispose:function(e){var t;f.dispose(),t=e.element,N.wrapChild&&Array.prototype.forEach.call(t.children,function(e){e.nodeType===Node.ELEMENT_NODE&&K(e,v)&&(t.insertBefore(e.firstElementChild,e),t.removeChild(e))})},prepareDrag:function(e,t){var n=e.element,o=c.draggables;m(o,n),e.layout.invalidateRects(),o.forEach(function(e){return lt(e,!0,a.animationDuration)}),f.start()},handleDrag:function(e){return l=u(s=e)},handleDrop:function(e){f.stop(),l&&l.dropPlaceholderContainer&&h.removeChild(l.dropPlaceholderContainer),s=null,u=At(c),d(e,l),l=null},fireRemoveElement:function(){d(s,Object.assign({},l,{addedIndex:null}),!0),l=null},getDragResult:function(){return l},getTranslateCalculator:function(e){return Ct(c)(e)},onTranslated:function(){g()},setDraggables:function(){m(c.draggables,h)},getScrollMaxSpeed:function(){return N.maxScrollSpeed},shouldUseTransformForGhost:function(){return!0===N.useTransformForGhost},getOptions:p,setOptions:function(e){a=!1===(!(1<arguments.length&&void 0!==arguments[1])||arguments[1])?Object.assign({},b,e):Object.assign({},b,a,e)}}}}var N=function(e,t){var n=Pt(e)(t);return e[i]=n,at.register(n),{dispose:function(){at.unregister(n),n.dispose(n)},setOptions:function(e,t){n.setOptions(e,t)}}};function Bt(e,t,n){Object.defineProperty(e,n,{set:function(e){t[n]=e},get:function(){return t[n]}})}N.wrapChild=!0,N.cancelDrag=function(){at.cancelDrag()},N.isDragging=function(){return at.isDragging()};function L(e,t){return console.warn('default export is deprecated. please use named export "smoothDnD"'),N(e,t)}L.cancelDrag=function(){N.cancelDrag()},L.isDragging=function(){return N.isDragging()},Bt(L,N,"useTransformForGhost"),Bt(L,N,"maxScrollSpeed"),Bt(L,N,"wrapChild"),Bt(L,N,"dropHandler"),e.smoothDnD=N,e.constants=Y,e.dropHandlers=le,e.default=L,Object.defineProperty(e,"__esModule",{value:!0})});
